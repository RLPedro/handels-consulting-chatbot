<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HandelsConsulting Chatbot Demo - Bilingual</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            background-color: #f5f6f5;
            margin: 0;
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }
        .chat-container {
            width: 100%;
            max-width: 700px;
            height: 600px;
            background: #ffffff;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }
        .chat-header {
            background-color: #003087;
            color: #ffffff;
            padding: 20px;
            text-align: center;
            border-radius: 12px 12px 0 0;
            position: relative;
        }
        .chat-header h2 {
            margin: 0;
            font-size: 1.5rem;
        }
        .chat-header p {
            margin: 5px 0 0;
            font-size: 0.9rem;
            opacity: 0.9;
        }
        .lang-toggle {
            position: absolute;
            top: 10px;
            right: 10px;
            background: rgba(255,255,255,0.2);
            border: none;
            color: white;
            padding: 5px 10px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.8rem;
        }
        .lang-toggle:hover {
            background: rgba(255,255,255,0.3);
        }
        .chat-messages {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
            background: #f9fafb;
        }
        .message {
            margin-bottom: 15px;
            padding: 12px 15px;
            border-radius: 8px;
            max-width: 80%;
            line-height: 1.5;
            font-size: 0.95rem;
        }
        .bot-message {
            background-color: #e6f0fa;
            align-self: flex-start;
            border: 1px solid #d1e0f2;
        }
        .user-message {
            background-color: #003087;
            color: #ffffff;
            align-self: flex-end;
            margin-left: auto;
            border: 1px solid #002060;
        }
        .service-list {
            list-style: none;
            padding: 0;
            margin: 10px 0;
        }
        .service-list li {
            margin: 8px 0;
            cursor: pointer;
            color: #003087;
            font-weight: 500;
            text-decoration: underline;
            transition: color 0.2s;
        }
        .service-list li:hover {
            color: #005bb5;
        }
        .chat-input {
            display: flex;
            padding: 15px;
            background: #ffffff;
            border-top: 1px solid #e0e0e0;
        }
        .chat-input input {
            flex: 1;
            padding: 12px;
            border: 1px solid #d0d4d8;
            border-radius: 8px;
            margin-right: 10px;
            font-size: 0.95rem;
            outline: none;
        }
        .chat-input input:focus {
            border-color: #003087;
        }
        .chat-input button {
            padding: 12px 20px;
            background-color: #003087;
            color: #ffffff;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.95rem;
            transition: background-color 0.2s;
        }
        .chat-input button:hover {
            background-color: #005bb5;
        }
        .chat-messages::-webkit-scrollbar {
            width: 8px;
        }
        .chat-messages::-webkit-scrollbar-thumb {
            background: #a0a0a0;
            border-radius: 4px;
        }
        .typing-indicator {
            background-color: #e6f0fa;
            padding: 10px;
            border-radius: 8px;
            max-width: 80%;
            align-self: flex-start;
            font-style: italic;
            color: #666;
            animation: pulse 1s infinite;
        }
        @keyframes pulse {
            0% { opacity: 0.6; }
            50% { opacity: 1; }
            100% { opacity: 0.6; }
        }
        @media (max-width: 600px) {
            .chat-container {
                height: 80vh;
                margin: 10px;
            }
            .chat-header h2 {
                font-size: 1.2rem;
            }
            .chat-input input, .chat-input button {
                font-size: 0.85rem;
            }
        }
    </style>
</head>
<body>
    <div class="chat-container">
        <div class="chat-header">
            <h2 id="headerTitle">HandelsConsulting Assistant</h2>
            <p id="headerSubtitle">Discover our expert consulting services!</p>
            <button class="lang-toggle" onclick="toggleLanguage()">SV</button>
        </div>
        <div class="chat-messages" id="chatMessages">
            <div class="message bot-message" id="welcomeMessage">
                <span id="welcomeText">Hi there! I'm Alex, a digital assistant from HandelsConsulting. How can I help you today? Feel free to ask about our services, like "Tell me about Sustainability," or anything about our company. Or just say hi! üòä<br>
                <ul class="service-list" id="serviceMenu">
                    <li onclick="selectService('strategy')" id="strategyLi">Strategy & Market</li>
                    <li onclick="selectService('customer')" id="customerLi">Customer Knowledge</li>
                    <li onclick="selectService('operations')" id="operationsLi">Operational Business Management</li>
                    <li onclick="selectService('digital')" id="digitalLi">Digitalization</li>
                    <li onclick="selectService('sustainability')" id="sustainabilityLi">Sustainability</li>
                    <li onclick="selectService('organization')" id="organizationLi">Organization</li>
                </ul></span>
            </div>
        </div>
        <div class="chat-input">
            <input type="text" id="userInput" placeholder="Type your message..." onkeypress="handleKeyPress(event)">
            <button onclick="sendMessage()">Send</button>
        </div>
    </div>

    <script>
        // Bilingual content: English and Swedish
        const languages = {
            en: {
                headerTitle: "HandelsConsulting Assistant",
                headerSubtitle: "Discover our expert consulting services!",
                welcome: "Hi there! I'm Alex, a digital assistant from HandelsConsulting. How can I help you today? Feel free to ask about our services, like 'Tell me about Sustainability,' or anything about our company. Or just say hi! üòä",
                services: {
                    strategy: {
                        name: "Strategy & Market",
                        desc: "Within Strategy & Market, we help companies understand their potential, opportunities, competitors, and external factors to make informed decisions. Our proven methodology drives success in both national and international projects.",
                        keywords: ["strategy", "market", "marknad", "strategi", "competitors", "business strategy"]
                    },
                    customer: {
                        name: "Customer Knowledge",
                        desc: "In Customer Knowledge, we conduct surveys and analyses to understand existing, potential, or past customers. We focus on their experiences, demands, demographics, and behaviors to deliver actionable insights.",
                        keywords: ["customer", "kund", "k√§nnedom", "survey", "customer behavior", "insights"]
                    },
                    operations: {
                        name: "Operational Business Management",
                        desc: "Operational Business Management is key to any organization. We use data-driven decisions to tackle operational challenges, setting the stage for growth and flexibility in a dynamic market.",
                        keywords: ["operations", "operativ", "verksamhet", "styrning", "management", "business operations"]
                    },
                    digital: {
                        name: "Digitalization",
                        desc: "In the era of digital transformation, we help businesses digitalize their models to unlock new revenue streams and create customer value. Our evaluations ensure successful digital strategies.",
                        keywords: ["digital", "digitalisering", "digital transformation", "technology"]
                    },
                    sustainability: {
                        name: "Sustainability",
                        desc: "Sustainability blends economic, social, and environmental goals. Using cutting-edge academic knowledge, we help businesses adopt sustainable practices that boost profitability.",
                        keywords: ["sustainability", "h√•llbarhet", "hallbarhet", "environment", "sustainable business"]
                    },
                    organization: {
                        name: "Organization",
                        desc: "In Organization, we analyze performance to unlock synergies, competitive advantages, and efficiency, offering fresh external perspectives to enhance your operations.",
                        keywords: ["organization", "organisation", "organisatorisk", "efficiency", "organizational performance"]
                    }
                },
                companyInfo: {
                    about: "We're a consulting firm powered by top students from the School of Business, Economics and Law at the University of Gothenburg. We provide expert services to businesses, focusing on growth, stability, competitiveness, and development. With over 2,300 projects and a 4.73/5 satisfaction rating, we bring fresh academic insights to real-world challenges.",
                    team: "Our team is made up of passionate students from the School of Business, Economics and Law at the University of Gothenburg, specializing in areas like business administration, economics, finance, entrepreneurship, international trade, logistics, and sustainability. They're eager to bring innovative ideas to your projects!",
                    stats: "We've delivered more than 2,300 projects with an average customer satisfaction of 4.73 out of 5. Our strength is in blending academic excellence with practical solutions."
                },
                inputPlaceholder: "Type your message...",
                sendButton: "Send",
                contactResponse: "Absolutely, I'd love to connect you with our team! Head over to our <a href='https://handelsconsulting.se/kontakt/' target='_blank'>contact page</a> or drop an email at <a href='mailto:info@handelsconsulting.se'>info@handelsconsulting.se</a>. What else is on your mind?",
                menuResponse: "Sure, here's a quick overview of our services:",
                fallbackResponse: "Hmm, I'm not quite catching that. Could you tell me more or rephrase? For example, are you asking about one of our services like Sustainability, or something else about the company?",
                clarificationResponse: "That could relate to a few things. Did you mean {suggestedName}, or perhaps something different? Let me know!",
                greetingResponses: ["Hey! Great to hear from you. What can I assist with today?", "Hello! I'm Alex, a digital assistant ready to chat about HandelsConsulting. What's up?"],
                thanksResponses: ["You're welcome! Anything else I can help with?", "No problem at all! Glad I could assist. What next?"],
                goodbyeResponses: ["Take care! If you have more questions, I'm here. üòä", "Bye for now! Looking forward to chatting again."],
                responseTemplates: [
                    "Absolutely, let's talk about {name}. {desc}<br><br>Does that answer your question, or would you like more details?",
                    "Sure thing! On {name}: {desc}<br><br>What do you think‚Äîdoes this fit what you're looking for?",
                    "Happy to dive into {name}! Here's the scoop: {desc}<br><br>Any follow-up thoughts on that?",
                    "Great choice! {name} is one of our strengths: {desc}<br><br>Tell me, how can we apply this to your needs?",
                    "Oh, interesting question! For {name}, we offer: {desc}<br><br>Curious‚Äîwhat sparked your interest in this?"
                ],
                typingText: "Alex is typing...",
                toggleButton: "SV",
                prompt: "Ask away‚ÄîI'm all ears! For example, 'What do you know about digital transformation?' or 'Tell me about your team.'"
            },
            sv: {
                headerTitle: "HandelsConsulting Assistent",
                headerSubtitle: "Uppt√§ck v√•ra expertkonsulttj√§nster!",
                welcome: "Hej! Jag √§r Alex, digital assistent fr√•n HandelsConsulting. Hur kan jag hj√§lpa dig idag? Fr√•ga g√§rna om v√•ra tj√§nster, som 'Ber√§tta om H√•llbarhet,' eller n√•got om f√∂retaget. Eller s√§g bara hej! üòä",
                services: {
                    strategy: {
                        name: "Strategi & Marknad",
                        desc: "Inom Strategi & Marknad bist√•r vi f√∂retag med insikter om potential, m√∂jligheter, konkurrenter och externa faktorer f√∂r att fatta v√§lgrundade beslut. V√•r bepr√∂vade metodik s√§kerst√§ller framg√•ng i b√•de nationella och internationella projekt.",
                        keywords: ["strategi", "marknad", "strategy", "konkurrenter", "aff√§rsstrategi"]
                    },
                    customer: {
                        name: "Kundk√§nnedom",
                        desc: "Inom Kundk√§nnedom genomf√∂r vi unders√∂kningar och analyser f√∂r att f√∂rst√• befintliga, potentiella eller tidigare kunder. Vi fokuserar p√• deras upplevelser, efterfr√•gan, demografi och beteenden f√∂r att ge handlingsbara insikter.",
                        keywords: ["kund", "k√§nnedom", "customer", "unders√∂kning", "kundbeteende", "insikter"]
                    },
                    operations: {
                        name: "Operativ Verksamhetsstyrning",
                        desc: "Operativ Verksamhetsstyrning √§r avg√∂rande f√∂r varje organisation. Vi anv√§nder datadrivna beslut f√∂r att l√∂sa operativa utmaningar, vilket skapar m√∂jligheter f√∂r tillv√§xt och flexibilitet p√• en dynamisk marknad.",
                        keywords: ["operativ", "verksamhet", "styrning", "operations", "ledning", "aff√§rsverksamhet"]
                    },
                    digital: {
                        name: "Digitalisering",
                        desc: "I digital transformationens era hj√§lper vi f√∂retag att digitalisera sina aff√§rsmodeller f√∂r att skapa nya int√§ktsfl√∂den och kundv√§rde. V√•ra utv√§rderingar s√§kerst√§ller framg√•ngsrika digitala strategier.",
                        keywords: ["digitalisering", "digital", "digital transformation", "teknologi"]
                    },
                    sustainability: {
                        name: "H√•llbarhet",
                        desc: "H√•llbarhet kombinerar ekonomiska, sociala och milj√∂m√§ssiga m√•l. Med den senaste akademiska kunskapen hj√§lper vi f√∂retag att inf√∂ra h√•llbara metoder som √∂kar l√∂nsamheten.",
                        keywords: ["h√•llbarhet", "hallbarhet", "sustainability", "milj√∂", "h√•llbart f√∂retagande"]
                    },
                    organization: {
                        name: "Organisation",
                        desc: "Inom Organisation analyserar vi prestanda f√∂r att l√•sa upp synergier, konkurrensf√∂rdelar och effektivitet, med nya externa perspektiv f√∂r att st√§rka din verksamhet.",
                        keywords: ["organisation", "organization", "organisatorisk", "effektivitet", "organisationsprestanda"]
                    }
                },
                companyInfo: {
                    about: "Vi √§r ett konsultf√∂retag drivet av toppstudenter fr√•n Handelsh√∂gskolan vid G√∂teborgs universitet. Vi erbjuder expertkonsulttj√§nster till f√∂retag, med fokus p√• tillv√§xt, stabilitet, konkurrenskraft och utveckling. Med √∂ver 2 300 projekt och 4,73/5 i n√∂jdhet kombinerar vi akademiska insikter med praktiska l√∂sningar.",
                    team: "V√•rt team best√•r av passionerade studenter fr√•n Handelsh√∂gskolan vid G√∂teborgs universitet, specialiserade inom omr√•den som f√∂retagsekonomi, nationalekonomi, finans, entrepren√∂rskap, internationell handel, logistik och h√•llbarhet. De √§r ivriga att bidra med innovativa id√©er till dina projekt!",
                    stats: "Vi har levererat mer √§n 2 300 projekt med en genomsnittlig kundn√∂jdhet p√• 4,73 av 5. V√•r styrka ligger i att blanda akademisk excellens med praktiska l√∂sningar."
                },
                inputPlaceholder: "Skriv ditt meddelande...",
                sendButton: "Skicka",
                contactResponse: "Absolut, jag skulle g√§rna koppla dig till v√•rt team! G√• till v√•r <a href='https://handelsconsulting.se/kontakt/' target='_blank'>kontaktsida</a> eller skicka ett mejl till <a href='mailto:info@handelsconsulting.se'>info@handelsconsulting.se</a>. Vad mer t√§nker du p√•?",
                menuResponse: "Visst, h√§r √§r en snabb √∂verblick √∂ver v√•ra tj√§nster:",
                fallbackResponse: "Hmm, jag h√§nger inte riktigt med. Kan du ber√§tta mer eller omformulera? Till exempel, fr√•gar du om en av v√•ra tj√§nster som H√•llbarhet, eller n√•got annat om f√∂retaget?",
                clarificationResponse: "Det kunde relatera till n√•gra saker. Menade du {suggestedName}, eller kanske n√•got annat? L√•t mig veta!",
                greetingResponses: ["Hej! Kul att h√∂ra fr√•n dig. Vad kan jag hj√§lpa till med idag?", "Hall√•! Jag √§r Alex, digital assistent redo att prata om HandelsConsulting. Vad g√§ller?"],
                thanksResponses: ["Ingen orsak! N√•got annat jag kan assistera med?", "Inga problem! Glad att jag kunde hj√§lpa. Vad n√§sta?"],
                goodbyeResponses: ["Ta hand om dig! Om du har fler fr√•gor √§r jag h√§r. üòä", "Hej d√• f√∂r nu! Ser fram emot att chatta igen."],
                responseTemplates: [
                    "Absolut, l√•t oss prata om {name}. {desc}<br><br>Besvarar det din fr√•ga, eller vill du ha mer detaljer?",
                    "Sj√§lvklart! Om {name}: {desc}<br><br>Vad tycker du‚Äîpassar det vad du letar efter?",
                    "G√§rna dyker in i {name}! H√§r √§r grejen: {desc}<br><br>N√•gra uppf√∂ljningstankar p√• det?",
                    "Bra val! {name} √§r en av v√•ra styrkor: {desc}<br><br>Ber√§tta, hur kan vi till√§mpa detta p√• dina behov?",
                    "√Öh, intressant fr√•ga! F√∂r {name} erbjuder vi: {desc}<br><br>Nyfiken‚Äîvad v√§ckte ditt intresse f√∂r detta?"
                ],
                typingText: "Alex skriver...",
                toggleButton: "EN",
                prompt: "Fr√•ga p√•‚Äîjag lyssnar! Till exempel, 'Vad vet du om digital transformation?' eller 'Ber√§tta om ert team.'"
            }
        };

        let currentLang = 'en';
        let services = languages.en.services;
        let conversationHistory = [];
        let lastService = null;

        function updateLanguage(lang) {
            currentLang = lang;
            const langData = languages[lang];
            document.getElementById('headerTitle').textContent = langData.headerTitle;
            document.getElementById('headerSubtitle').textContent = langData.headerSubtitle;
            document.querySelector('.lang-toggle').textContent = langData.toggleButton;
            document.getElementById('userInput').placeholder = langData.inputPlaceholder;
            document.querySelector('button[onclick="sendMessage()"]').textContent = langData.sendButton;
            services = langData.services;

            const welcomeSpan = document.getElementById('welcomeText');
            if (welcomeSpan) {
                welcomeSpan.innerHTML = langData.welcome + '<br>' +
                    '<ul class="service-list" id="serviceMenu">' +
                    Object.keys(services).map(key => `<li onclick="selectService('${key}')" id="${key}Li">${services[key].name}</li>`).join('') +
                    '</ul>';
            }

            const menu = document.getElementById('serviceMenu');
            if (menu) {
                menu.innerHTML = Object.keys(services).map(key => `<li onclick="selectService('${key}')" id="${key}Li">${services[key].name}</li>`).join('');
            }
        }

        function toggleLanguage() {
            const newLang = currentLang === 'en' ? 'sv' : 'en';
            updateLanguage(newLang);
        }

        function addMessage(text, isUser) {
            const messagesDiv = document.getElementById('chatMessages');
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${isUser ? 'user-message' : 'bot-message'}`;
            messageDiv.innerHTML = text;
            messagesDiv.appendChild(messageDiv);
            messagesDiv.scrollTop = messagesDiv.scrollHeight;
            return messageDiv;
        }

        function showTypingIndicator() {
            const langData = languages[currentLang];
            const typingDiv = addMessage(langData.typingText, false);
            typingDiv.classList.add('typing-indicator');
            return typingDiv;
        }

        function removeTypingIndicator(typingDiv) {
            typingDiv.remove();
        }

        function processInput(userText) {
            const lowerText = userText.toLowerCase();
            const langData = languages[currentLang];
            let response = '';
            let matchedService = null;

            conversationHistory.push({ role: 'user', content: userText });

            if (lowerText.includes('hi') || lowerText.includes('hello') || lowerText.includes('hej') || lowerText.includes('hall√•')) {
                response = langData.greetingResponses[Math.floor(Math.random() * langData.greetingResponses.length)];
            } else if (lowerText.includes('thanks') || lowerText.includes('thank you') || lowerText.includes('tack')) {
                response = langData.thanksResponses[Math.floor(Math.random() * langData.thanksResponses.length)];
            } else if (lowerText.includes('bye') || lowerText.includes('goodbye') || lowerText.includes('hej d√•')) {
                response = langData.goodbyeResponses[Math.floor(Math.random() * langData.goodbyeResponses.length)];
            } else {
                for (const [key, service] of Object.entries(services)) {
                    if (service.keywords.some(keyword => lowerText.includes(keyword))) {
                        matchedService = key;
                        lastService = key;
                        const template = langData.responseTemplates[Math.floor(Math.random() * langData.responseTemplates.length)];
                        response = template.replace('{name}', service.name).replace('{desc}', service.desc);
                        if (conversationHistory.length > 1 && lastService) {
                            response = `Building on our chat, ${response}`;
                        }
                        break;
                    }
                }

                if (!matchedService) {
                    if (lowerText.includes('contact') || lowerText.includes('kontakt')) {
                        response = langData.contactResponse;
                    } else if (lowerText.includes('stats') || lowerText.includes('facts') || lowerText.includes('info') || lowerText.includes('statistik')) {
                        response = langData.companyInfo.stats + '<br><br>Anything else you\'d like to know about us?';
                    } else if (lowerText.includes('who') || lowerText.includes('team') || lowerText.includes('v√•rt team') || lowerText.includes('studenter')) {
                        response = langData.companyInfo.team + '<br><br>How can I connect this to your interests?';
                    } else if (lowerText.includes('what') || lowerText.includes('vad') || lowerText.includes('handelsconsulting') || lowerText.includes('company') || lowerText.includes('f√∂retag')) {
                        response = langData.companyInfo.about + '<br><br>Does that give you a good idea, or shall I elaborate?';
                    } else if (lowerText.includes('menu') || lowerText.includes('meny') || lowerText.includes('services') || lowerText.includes('tj√§nster')) {
                        response = langData.menuResponse + '<br><ul class="service-list">' +
                            Object.keys(services).map(key => `<li onclick="selectService('${key}')">${services[key].name}</li>`).join('') +
                            '</ul>' + langData.prompt;
                    } else {
                        const allKeywords = Object.values(services).flatMap(s => s.keywords);
                        const closestKeyword = allKeywords.find(k => lowerText.includes(k.split(' ')[0]));
                        if (closestKeyword) {
                            const suggestedService = Object.entries(services).find(([_, s]) => s.keywords.includes(closestKeyword));
                            if (suggestedService) {
                                response = langData.clarificationResponse.replace('{suggestedName}', suggestedService[1].name);
                            } else {
                                response = langData.fallbackResponse;
                            }
                        } else {
                            response = langData.fallbackResponse;
                        }
                    }
                }
            }

            conversationHistory.push({ role: 'bot', content: response });
            return response;
        }

        function sendMessage() {
            const input = document.getElementById('userInput');
            const userText = input.value.trim();
            if (!userText) return;

            addMessage(userText, true);
            input.value = '';

            const typingDiv = showTypingIndicator();
            const delay = Math.random() * 1000 + 1000;

            setTimeout(() => {
                removeTypingIndicator(typingDiv);
                const response = processInput(userText);
                addMessage(response, false);
            }, delay);
        }

        function handleKeyPress(event) {
            if (event.key === 'Enter') {
                sendMessage();
            }
        }

        function selectService(serviceKey) {
            const typingDiv = showTypingIndicator();
            const delay = Math.random() * 1000 + 1000;

            setTimeout(() => {
                removeTypingIndicator(typingDiv);
                const langData = languages[currentLang];
                const template = langData.responseTemplates[Math.floor(Math.random() * langData.responseTemplates.length)];
                const response = template.replace('{name}', services[serviceKey].name).replace('{desc}', services[serviceKey].desc);
                lastService = serviceKey;
                addMessage(response, false);
                conversationHistory.push({ role: 'bot', content: response });
            }, delay);
        }

        // Initialize
        updateLanguage('en');
    </script>
</body>
</html>